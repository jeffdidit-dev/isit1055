<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Is it 10:55?</title>

<link rel="icon" type="image/png" href="icon.png" />

<style>
body {
  font-family: Arial, sans-serif;
  background: black;
  color: white;
  text-align: center;
  padding-top: 50px;
  overflow-x: hidden;
}

#status {
  font-size: 80px;
  margin: 20px;
}

#clock {
  font-size: 40px;
  margin: 20px;
}

/* ===== TRASH / HAT WRAPPER ===== */
#trashWrapper {
  position: relative;
  display: inline-block;
}

#trashAnim {
  position: relative;
  display: inline-block;
}

#statusImage {
  width: 300px;
  cursor: pointer;
  display: block;
}

/* ===== ORIGINAL ANIMATIONS (UNCHANGED) ===== */
.smash { animation: smash 0.2s ease; }
.shake-slow { animation: shake 1s infinite; }
.shake-fast { animation: shake 0.2s infinite; }
.shake-soft { animation: shakeSoft 1s infinite; }
.shake-small { animation: shakeSmall 0.4s infinite; }
.jump-small { animation: jumpSmall 0.6s ease; }
.jump-big { animation: jumpBig 0.8s ease; }
.bounce { animation: bounce 1s ease; }

@keyframes smash {
  0% { transform: scale(1); }
  100% { transform: scale(0.8); }
}

@keyframes shake {
  0%,100% { transform: translateX(0); }
  25% { transform: translateX(-2px); }
  50% { transform: translateX(2px); }
  75% { transform: translateX(-2px); }
}

@keyframes shakeSoft {
  25% { transform: translateX(-1px); }
  50% { transform: translateX(1px); }
  75% { transform: translateX(-1px); }
}

@keyframes shakeSmall {
  25% { transform: translateX(-0.5px); }
  50% { transform: translateX(0.5px); }
  75% { transform: translateX(-0.5px); }
}

@keyframes jumpSmall {
  50% { transform: translateY(-20px); }
}

@keyframes jumpBig {
  50% { transform: translateY(-80px); }
}

@keyframes bounce {
  50% { transform: translateY(-50px); }
}

/* ===== SANTA HAT ===== */
.santa-hat {
  position: absolute;
  width: 140px;
  top: -18px;
  left: 56%;
  transform-origin: 20% 80%;
  transform: rotate(28deg);
  z-index: 5;
}

/* ===== HAT FLY OFF ===== */
.hat-fly {
  animation: hatFly 1s ease-out forwards;
}

@keyframes hatFly {
  from {
    transform: rotate(28deg) translate(0,0);
    opacity: 1;
  }
  to {
    transform: rotate(720deg) translate(220px,-320px);
    opacity: 0;
  }
}

/* ===== SNOW ===== */
#snow {
  position: fixed;
  inset: 0;
  pointer-events: none;
}

.snowflake {
  position: absolute;
  top: -10px;
  opacity: 0.8;
  animation: fall linear infinite;
}

@keyframes fall {
  to { transform: translateY(110vh); }
}
</style>
</head>

<body>

<div id="snow"></div>

<div id="status">Loading...</div>
<div id="clock">--:--:--</div>

<div id="trashWrapper">
  <div id="trashAnim">
    <img id="statusImage" src="" alt="Trash Can">
    <img id="hat" class="santa-hat" src="santa-hat.png">
  </div>
</div>

<audio id="yesSound" src="yes.mp3" preload="auto"></audio>
<audio id="noSound" src="no.mp3" preload="auto"></audio>
<audio id="xmasMusic" src="christmas.mp3" preload="auto"></audio>

<script>
let lastStatus = "";
let timers = [];

const snow = document.getElementById("snow");
const trashAnim = document.getElementById("trashAnim");
const hat = document.getElementById("hat");
const statusImage = document.getElementById("statusImage");

/* ===== SNOW (DECEMBER ONLY) ===== */
if (new Date().getMonth() === 11) {
  setInterval(() => {
    const flake = document.createElement("div");
    flake.className = "snowflake";
    flake.textContent = "â„";
    flake.style.left = Math.random() * 100 + "vw";
    flake.style.fontSize = 10 + Math.random() * 14 + "px";
    flake.style.animationDuration = 6 + Math.random() * 6 + "s";
    snow.appendChild(flake);
    setTimeout(() => flake.remove(), 12000);
  }, 350);
}

/* ===== HELPERS ===== */
function clearAnimations() {
  timers.forEach(t => clearTimeout(t));
  timers = [];
  trashAnim.className = "";
  hat.className = "santa-hat";
}

function playClickSound(sound) {
  const music = document.getElementById("xmasMusic");

  music.volume = 0.35;
  music.currentTime = 0;
  music.play().catch(()=>{});

  sound.currentTime = 0;
  sound.play();

  sound.onended = () => {
    music.pause();
    music.currentTime = 0;
  };
}

/* ===== STATUS / CLOCK ===== */
function updateStatusDisplay() {
  const now = new Date();
  const is1055 =
    (now.getHours() === 10 || now.getHours() === 22) &&
    now.getMinutes() === 55;

  document.getElementById("clock").textContent =
    now.toLocaleTimeString();

  if (is1055) {
    document.getElementById("status").textContent = "Yes";
    statusImage.src = "yes.PNG";
    lastStatus = "yes";
  } else {
    document.getElementById("status").textContent = "No";
    statusImage.src = "no.PNG";
    lastStatus = "no";
  }
}

/* ===== CLICK HANDLER ===== */
function handleClick() {
  clearAnimations();

  if (lastStatus === "yes") {
    trashAnim.className = "bounce";
    playClickSound(document.getElementById("yesSound"));
  } else {
    playClickSound(document.getElementById("noSound"));

    trashAnim.className = "smash";

    timers.push(setTimeout(() => trashAnim.className = "shake-slow", 200));
    timers.push(setTimeout(() => trashAnim.className = "jump-small", 3000));
    timers.push(setTimeout(() => trashAnim.className = "shake-fast", 3200));
    timers.push(setTimeout(() => trashAnim.className = "jump-small", 4000));
    timers.push(setTimeout(() => trashAnim.className = "shake-soft", 4300));
    timers.push(setTimeout(() => trashAnim.className = "shake-fast", 5750));
    timers.push(setTimeout(() => trashAnim.className = "jump-small", 6000));
    timers.push(setTimeout(() => trashAnim.className = "shake-small", 6100));
    timers.push(setTimeout(() => trashAnim.className = "shake-soft", 7000));

    timers.push(setTimeout(() => trashAnim.className = "jump-big", 8000));

    /* ðŸš€ Hat flies exactly at jump apex */
    timers.push(setTimeout(() => {
      hat.classList.add("hat-fly");
    }, 8400));
  }
}

/* ===== INIT ===== */
updateStatusDisplay();
setInterval(updateStatusDisplay, 1000);
statusImage.addEventListener("click", handleClick);
</script>

</body>
</html>
